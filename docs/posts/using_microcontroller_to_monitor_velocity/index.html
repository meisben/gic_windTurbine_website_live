<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>üìà Using a microcontroller to record velocity | Girls into Coding | Wind Turbine Activity</title>
<meta name="keywords" content="">
<meta name="description" content="Using a special type of computer to chart the velocity">
<meta name="author" content="Ben MC">
<link rel="canonical" href="https://meisben.github.io/gic_windTurbine_website_live/posts/using_microcontroller_to_monitor_velocity/">
<link crossorigin="anonymous" href="https://meisben.github.io/gic_windTurbine_website_live/assets/css/stylesheet.4599eadb9eb2ad3d0a8d6827b41a8fda8f2f4af226b63466c09c5fddbc8706b7.css" integrity="sha256-RZnq256yrT0KjWgntBqP2o8vSvImtjRmwJxf3byHBrc=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://meisben.github.io/gic_windTurbine_website_live/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://meisben.github.io/gic_windTurbine_website_live/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://meisben.github.io/gic_windTurbine_website_live/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://meisben.github.io/gic_windTurbine_website_live/apple-touch-icon.png">
<link rel="mask-icon" href="https://meisben.github.io/gic_windTurbine_website_live/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="üìà Using a microcontroller to record velocity" />
<meta property="og:description" content="Using a special type of computer to chart the velocity" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://meisben.github.io/gic_windTurbine_website_live/posts/using_microcontroller_to_monitor_velocity/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-17T08:05:00+00:00" />
<meta property="article:modified_time" content="2024-01-17T08:05:00+00:00" /><meta property="og:site_name" content="changeThisTitle" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="üìà Using a microcontroller to record velocity"/>
<meta name="twitter:description" content="Using a special type of computer to chart the velocity"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://meisben.github.io/gic_windTurbine_website_live/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "üìà Using a microcontroller to record velocity",
      "item": "https://meisben.github.io/gic_windTurbine_website_live/posts/using_microcontroller_to_monitor_velocity/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "üìà Using a microcontroller to record velocity",
  "name": "üìà Using a microcontroller to record velocity",
  "description": "Using a special type of computer to chart the velocity",
  "keywords": [
    
  ],
  "articleBody": " Introduction Aims In this part of the activity we will:\nAdd a voltage divider and understand how it works Record voltage using a microcontroller Visualise the voltage on a computer screen as a chart Learning outcomes Learning outcome Electronics Understand how to use a breadboard Electronics Understand, create and use a voltage divder Mechatronics Read an analogue signal using a microcontroller Preperation Equipment required Equipment item Quantity Custom wind turbine kit (you just assembled it!) 1 Tools required Tool Quantity Multimeter 1 Why use a voltage divider? Feeding a voltage into a microcontroller The microbit can measure an analogue voltage input of up to 3.3 volts.\nOur voltage is higher than 3.3 volts so we will need to reduce it! If we don‚Äôt we will damage the microbit.\nWhat is a voltage divider A voltage divider helps us to reduce (step down) a voltage to a lower level.\nIt‚Äôs a type of electronic circuit that looks like this.\nWe can use an easy formula or calculator to find the values of resistors that we should use in the voltage divider.\nTry that now. If the maximum voltage from the wind turbine is 5 volts. Use the calculator to find which resistor values we will need to use in the voltage divider. One of the resistors values must be 330 Ohms.\nLet‚Äôs create the voltage divider First make sure you have connected to the positive and negative voltage of the motor terminals Position your crocodile clips onto your motor terminals.\nConnect the other end into your wago connectors\nUnderstanding the breadboard The breadboard lets us easily create electronic circuits.\nWe can stick wires into the breadboard\nAll of the columns of holes of the breadboard are connected together with metal strips.\nThis means any wires we place in the same columnn are connected together.\nCreating our voltage divider in the breadboard Create the voltage divider. The image below shows you how to do that.\nYou will have to cut some wires (jumpers) to the right length.\nYou will need to use the wago electrical connectors and the crocodile clips.\nCheck you voltage divider with a multimeter Use the multimeter to measure your voltage divider.\nTurn the wind turbine shaft with you fingers.\nYou should find that the reading is postiive and does not exceed 2 volts. If this is not true please seek help from a mentor.\n‚ö†Ô∏è Do not go past this step until you have shared your setup with a mentor. It‚Äôs possible to damage the microbit if there‚Äôs too much voltage.\nReadimg the analogue input with the microbit Connect the output from the voltage divider to the microbit Following the circuit diagram shown in the image below\nYou will need to use the wago electrical connectors and the crocodile clips.\nCreate your program Go to micro:bit make code and start a new program\nEnter this code. You will need to use:\nPins Variables Serial Download it to your microbit You will need to:\nInsert your usb lead Connect your device (as shown in the image below) Run the program Go to show data - device\nYou should see:\nA heart shown on the microbit display When you rotate the shaft of the wind turbine clockwise, then the microbit reads the analogue input Convert it to a voltage Currently the microbit reads a voltage from 0 to 3.3V and maps it to a number from 0-1023.\nTo convert this back to a voltage it‚Äôs easy we just need to use this simple formula\nWe need to multiply again by 2 because of the voltage divider (which reduces the voltage by half)\nAdjust the program Let‚Äôs adjust the program to reflect this\nWe should see the serial values now appear in volts\n",
  "wordCount" : "622",
  "inLanguage": "en",
  "datePublished": "2024-01-17T08:05:00Z",
  "dateModified": "2024-01-17T08:05:00Z",
  "author":{
    "@type": "Person",
    "name": "Ben MC"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://meisben.github.io/gic_windTurbine_website_live/posts/using_microcontroller_to_monitor_velocity/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Girls into Coding | Wind Turbine Activity",
    "logo": {
      "@type": "ImageObject",
      "url": "https://meisben.github.io/gic_windTurbine_website_live/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://meisben.github.io/gic_windTurbine_website_live/" accesskey="h" title="Girls into Coding | Wind Turbine Activity (Alt + H)">Girls into Coding | Wind Turbine Activity</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://meisben.github.io/gic_windTurbine_website_live/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://meisben.github.io/gic_windTurbine_website_live/categories/" title="Instructions">
                    <span>Instructions</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      üìà Using a microcontroller to record velocity
    </h1>
  </header> 
  <div class="post-content"><hr>
<h1 id="introduction">Introduction<a hidden class="anchor" aria-hidden="true" href="#introduction">#</a></h1>
<h2 id="aims">Aims<a hidden class="anchor" aria-hidden="true" href="#aims">#</a></h2>
<p>In this part of the activity we will:</p>
<ul>
<li>Add a voltage divider and understand how it works</li>
<li>Record voltage using a microcontroller</li>
<li>Visualise the voltage on a computer screen as a chart</li>
</ul>
<h2 id="learning-outcomes">Learning outcomes<a hidden class="anchor" aria-hidden="true" href="#learning-outcomes">#</a></h2>
<table>
<thead>
<tr>
<th>Learning outcome</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Electronics</td>
<td>Understand how to use a breadboard</td>
</tr>
<tr>
<td>Electronics</td>
<td>Understand, create and use a voltage divder</td>
</tr>
<tr>
<td>Mechatronics</td>
<td>Read an analogue signal using a microcontroller</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="preperation">Preperation<a hidden class="anchor" aria-hidden="true" href="#preperation">#</a></h1>
<h2 id="equipment-required">Equipment required<a hidden class="anchor" aria-hidden="true" href="#equipment-required">#</a></h2>
<table>
<thead>
<tr>
<th>Equipment item</th>
<th style="text-align:center">Quantity</th>
</tr>
</thead>
<tbody>
<tr>
<td>Custom wind turbine kit (you just assembled it!)</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<h2 id="tools-required">Tools required<a hidden class="anchor" aria-hidden="true" href="#tools-required">#</a></h2>
<table>
<thead>
<tr>
<th>Tool</th>
<th style="text-align:center">Quantity</th>
</tr>
</thead>
<tbody>
<tr>
<td>Multimeter</td>
<td style="text-align:center">1</td>
</tr>
</tbody>
</table>
<hr>
<h1 id="why-use-a-voltage-divider">Why use a voltage divider?<a hidden class="anchor" aria-hidden="true" href="#why-use-a-voltage-divider">#</a></h1>
<h2 id="feeding-a-voltage-into-a-microcontroller">Feeding a voltage into a microcontroller<a hidden class="anchor" aria-hidden="true" href="#feeding-a-voltage-into-a-microcontroller">#</a></h2>
<p>The microbit can <a href="https://makecode.microbit.org/reference/pins/analog-read-pin">measure an analogue voltage input of up to 3.3 volts.</a></p>
<p>Our voltage is higher than 3.3 volts so we will need to reduce it! If we don&rsquo;t we will damage the microbit.</p>
<h2 id="what-is-a-voltage-divider">What is a voltage divider<a hidden class="anchor" aria-hidden="true" href="#what-is-a-voltage-divider">#</a></h2>
<p>A voltage divider helps us to reduce (step down) a voltage to a lower level.</p>
<p>It&rsquo;s a type of electronic circuit that looks like this.</p>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/voltage_divider.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/voltage_divider.png" alt="Pic"  />
</a></p>
<p>We can use an easy formula or <a href="https://ohmslawcalculator.com/voltage-divider-calculator">calculator</a> to find the values of resistors that we should use in the voltage divider.</p>
<p>Try that now. If the maximum voltage from the wind turbine is 5 volts. Use the calculator to find which resistor values we will need to use in the voltage divider. One of the resistors values must be 330 Ohms.</p>
<h1 id="lets-create-the-voltage-divider">Let&rsquo;s create the voltage divider<a hidden class="anchor" aria-hidden="true" href="#lets-create-the-voltage-divider">#</a></h1>
<h2 id="first-make-sure-you-have-connected-to-the-positive-and-negative-voltage-of-the-motor-terminals">First make sure you have connected to the positive and negative voltage of the motor terminals<a hidden class="anchor" aria-hidden="true" href="#first-make-sure-you-have-connected-to-the-positive-and-negative-voltage-of-the-motor-terminals">#</a></h2>
<p>Position your crocodile clips onto your motor terminals.</p>
<p>Connect the other end into your wago connectors</p>
<h2 id="understanding-the-breadboard">Understanding the breadboard<a hidden class="anchor" aria-hidden="true" href="#understanding-the-breadboard">#</a></h2>
<p>The breadboard lets us easily create electronic circuits.</p>
<p>We can stick wires into the breadboard</p>
<p>All of the columns of holes of the breadboard are connected together with metal strips.</p>
<p>This means any wires we place in the same columnn are connected together.</p>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/breadboard_connections_v1.1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/breadboard_connections_v1.1.png" alt="Pic"  />
</a></p>
<h2 id="creating-our-voltage-divider-in-the-breadboard">Creating our voltage divider in the breadboard<a hidden class="anchor" aria-hidden="true" href="#creating-our-voltage-divider-in-the-breadboard">#</a></h2>
<p>Create the voltage divider. The image below shows you how to do that.</p>
<p>You will have to cut some wires (jumpers) to the right length.</p>
<p>You will need to use the wago electrical connectors and the crocodile clips.</p>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/wind_turbine_voltage_reading_multi_v1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/wind_turbine_voltage_reading_multi_v1.png" alt="Pic"  />
</a></p>
<h2 id="check-you-voltage-divider-with-a-multimeter">Check you voltage divider with a multimeter<a hidden class="anchor" aria-hidden="true" href="#check-you-voltage-divider-with-a-multimeter">#</a></h2>
<p>Use the multimeter to measure your voltage divider.</p>
<p>Turn the wind turbine shaft with you fingers.</p>
<p>You should find that the reading is postiive and does not exceed 2 volts. If this is not true please seek help from a mentor.</p>
<blockquote>
<p>&#x26a0;&#xfe0f; Do not go past this step until you have shared your setup with a mentor. It&rsquo;s possible to damage the microbit if there&rsquo;s too much voltage.</p>
</blockquote>
<h1 id="readimg-the-analogue-input-with-the-microbit">Readimg the analogue input with the microbit<a hidden class="anchor" aria-hidden="true" href="#readimg-the-analogue-input-with-the-microbit">#</a></h1>
<h2 id="connect-the-output-from-the-voltage-divider-to-the-microbit">Connect the output from the voltage divider to the microbit<a hidden class="anchor" aria-hidden="true" href="#connect-the-output-from-the-voltage-divider-to-the-microbit">#</a></h2>
<p>Following the circuit diagram shown in the image below</p>
<p>You will need to use the wago electrical connectors and the crocodile clips.</p>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/wind_turbine_voltage_reading_microbit_v1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/wind_turbine_voltage_reading_microbit_v1.png" alt="Pic"  />
</a></p>
<h2 id="create-your-program">Create your program<a hidden class="anchor" aria-hidden="true" href="#create-your-program">#</a></h2>
<p>Go to <a href="https://makecode.microbit.org">micro:bit make code</a> and start a new program</p>
<p>Enter this code. You will need to use:</p>
<ul>
<li>Pins</li>
<li>Variables</li>
<li>Serial</li>
</ul>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/code_voltage_serial_measurement_v1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/code_voltage_serial_measurement_v1.png" alt="Pic"  />
</a></p>
<h2 id="download-it-to-your-microbit">Download it to your microbit<a hidden class="anchor" aria-hidden="true" href="#download-it-to-your-microbit">#</a></h2>
<p>You will need to:</p>
<ul>
<li>Insert your usb lead</li>
<li>Connect your device (as shown in the image below)</li>
</ul>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/connect_device_v1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/connect_device_v1.png" alt="Pic"  />
</a></p>
<h2 id="run-the-program">Run the program<a hidden class="anchor" aria-hidden="true" href="#run-the-program">#</a></h2>
<p>Go to <em>show data - device</em></p>
<p>You should see:</p>
<ul>
<li>A heart shown on the microbit display</li>
<li>When you rotate the shaft of the wind turbine clockwise, then the microbit reads the analogue input</li>
</ul>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/serial_data_v1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/serial_data_v1.png" alt="Pic"  />
</a></p>
<h1 id="convert-it-to-a-voltage">Convert it to a voltage<a hidden class="anchor" aria-hidden="true" href="#convert-it-to-a-voltage">#</a></h1>
<p>Currently the microbit <a href="https://makecode.microbit.org/reference/pins/analog-read-pin">reads a voltage from 0 to 3.3V and maps it to a number from 0-1023</a>.</p>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/read_analogue_v1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/read_analogue_v1.png" alt="Pic"  />
</a></p>
<p>To convert this back to a voltage it&rsquo;s easy we just need to use this simple formula</p>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/equation_convert_pinval_voltage_v1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/equation_convert_pinval_voltage_v1.png" alt="Pic"  />
</a></p>
<p>We need to multiply again by 2 because of the voltage divider (which reduces the voltage by half)</p>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/equation_convert_pinval_voltage_x2_v1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/equation_convert_pinval_voltage_x2_v1.png" alt="Pic"  />
</a></p>
<h1 id="adjust-the-program">Adjust the program<a hidden class="anchor" aria-hidden="true" href="#adjust-the-program">#</a></h1>
<p>Let&rsquo;s adjust the program to reflect this</p>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/code_voltage_serial_measurement_volts_v1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/code_voltage_serial_measurement_volts_v1.png" alt="Pic"  />
</a></p>
<p>We should see the serial values now appear in volts</p>
<p><a href="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/serial_data__voltsv1.png"><img loading="lazy" src="https://meisben.github.io/gic_windTurbine_website_live/images/using_microcontroller_to_monitor_velocity/serial_data__voltsv1.png" alt="Pic"  />
</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://meisben.github.io/gic_windTurbine_website_live/posts/extending_wind_turbine_features/">
    <span class="title">¬´ Prev</span>
    <br>
    <span>üî© Extending our wind turbine features</span>
  </a>
  <a class="next" href="https://meisben.github.io/gic_windTurbine_website_live/posts/monitor_wind_turbine_remotely/">
    <span class="title">Next ¬ª</span>
    <br>
    <span>üì° Monitor the wind turbine remotely</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://meisben.github.io/gic_windTurbine_website_live/">Girls into Coding | Wind Turbine Activity</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
